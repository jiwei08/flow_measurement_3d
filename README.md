# 3D Flow Measurement Method

## Overview
This repository implements an advanced 3D flow measurement technique that extends our previous 2D inverse approach ([Li et al., Flow Measurement: an Inverse Problem Formulation. 2023](https://doi.org/10.1137/22M1530720)). The method enables high-resolution, continuous water velocity measurements in complex hydrodynamic environments where conventional instruments like ADCPs are inadequate.

## Key Features
- **Three-dimensional flow analysis** - Extends original 2D method to full 3D hydrodynamic scenarios
- **Multi-directional emission** - Uses multiple emission directions for comprehensive flow characterization
- **Adaptive receiver configuration** - Flexible setup for various field conditions
- **Numerical simulation framework** - Includes validation tools for diverse flow conditions

## Target Applications
âœ” Hazardous flow monitoring (floods, strong currents)  
âœ” Sediment-laden river flow measurement  
âœ” Hydraulic engineering applications  
âœ” Water resource management  

## Technology Advantages
ðŸš€ Higher resolution than traditional ADCPs  
ðŸŒŠ Effective in challenging environments  
ðŸ“Š Continuous monitoring capability  
ðŸ”§ Configurable for various field setups  

## Getting Started
1. Clone the repository
2. Install required dependencies
```
pip install -r requirements.txt
```

For the stationary flow simulation, follow these steps:
1. Run `gen_source_mask.py` to generate the source mask for your specific setup.
2. Run `mod.sh` to generate the simulation data.
3. Run `inv.sh` to run the inverse problem solver.

For the moving flow simulation, follow these steps:
1. Use `read_csv_fluent()` in `IO.py` to read the CSV file generated by Fluent and save it as a `.npy` file.
2. Run `gen_source_masks_with_flow.py` to generate the source masks for your specific setup.
3. Run `mod_moving.sh` to generate the simulation data.
4. Run `inv_moving.sh` to run the inverse problem solver.
5. Run `inv_flow.sh` to recover the flow field.

## Citation
If you use this code in your research, please cite the following paper:
```
@article{li2025acousticinversionbasedflowmeasurement,
      title={An Acoustic Inversion-Based Flow Measurement Model in 3D Hydrodynamic Systems}, 
      author={Jiwei Li and Lingyun Qiu and Zhongjing Wang and Hui Yu},
      year={2025},
      eprint={2503.11986},
      archivePrefix={arXiv},
      primaryClass={math.NA},
      url={https://arxiv.org/abs/2503.11986}, 
}
```